This is our TODO list:
# üìù Projekt-Fahrplan: Smol-Quant

## 1. Data Engineering (Datenbasis aufr√§umen)

* **Skripte trennen:**
    * Wir haben aktuell alles gemischt und nutzen Niklas' alte Jupyter Notebooks. Wir sollten zeigen, dass wir es f√ºr diesen Kurs selber gemacht haben.
    * **Neu:** Ein Skript **`data_scraping.py`** (nur Wikipedia/Yahoo abfragen & CSV speichern).
    * **Neu:** Ein Skript **`embeddings.py`** (nimmt die CSV & f√ºllt die ChromaDB).
    * *Ziel:* Wir k√∂nnen die DB neu bauen, ohne jedes Mal neu zu scrapen.

* **RAG-Code bereinigen:**
    * Den alten Code f√ºr die RAG-Kette rauswerfen. Wir brauchen nur die Logik zum Scrapen und Embedden.

* **Datenmenge vergr√∂√üern (sp√§ter):**
    * Die aktuelle VectorDB ist noch zu klein.
    * *Aufgabe:* Mehr News-Artikel scrapen (l√§ngerer Zeitraum?), damit der Agent bei RAG auch wirklich was findet.

---

## 2. Agent & Tools (Das Gehirn)

* **Tools komplexer machen:**
    * **`eda_tool`**: Soll nicht nur `describe()` ausgeben. Der Agent muss gezielt Spalten filtern, **Gruppen bilden** und **Plots** speichern k√∂nnen.
    * **`rag_tool`**: Muss sauberer zur√ºckgeben, wenn er *nichts* findet (damit der Agent nicht halluziniert).

* **Agent "schlauer" machen (Decision Making):**
    * Er muss lernen: F√ºr "Zahlen" $\rightarrow$ nimm CSV. F√ºr "Gr√ºnde/News" $\rightarrow$ nimm RAG.
    * Aktuell vermischt er das manchmal oder r√§t.

---

## 3. Image Generation (Visualisierung)

* **Tool-Integration (DALL-E 3):**
    * Das `ImageGenTool` steht im Code, muss aber robust getestet werden.
    * *Aufgabe:* Sicherstellen, dass der API-Key korrekt gezogen wird und Fehler (z.B. "Content Policy Violation" bei OpenAI) sauber abgefangen werden.

* **Streamlit-Anbindung (Frontend):**
    * Problem: Der Agent gibt aktuell oft nur die Bild-URL als Text zur√ºck. Das sieht nicht gut aus.
    * **L√∂sung:** Das Streamlit-Skript muss erkennen: "Aha, eine Bild-URL!" und das Bild direkt rendern (`st.image()`), statt nur den Link zu zeigen.

* **Trigger-Logik (Kostenbremse):**
    * Bilder generieren kostet Geld und dauert lange.
    * **Regel:** Der Agent darf das Bild-Tool **nur** nutzen, wenn der User explizit danach fragt (z.B. "Generiere ein Bild zur Marktstimmung").
    * Es darf *nicht* automatisch bei jeder Standard-Antwort passieren.


### 4. UI & Pr√§sentation (Die Sichtbarkeit)

* **Streamlit UI bauen:**
    * Das Terminal reicht nicht f√ºr die Abgabe.
    * **Aufgabe:** Ein echtes Chat-Fenster bauen, das den Verlauf anzeigt (History).

* **Image Generation (Bild-Tool):**
    * Muss sauber in Streamlit integriert werden.
    * **Regel:** Das Bild wird nur generiert, wenn der Nutzer es explizit im Prompt verlangt (kostet Geld/Zeit).

* **Plot-Tool:**
    * Wenn der Agent (EDA) einen Plot generiert (Mittelwerte, Kurven), muss dieser **als Grafik** in Streamlit angezeigt werden.
    * *Aktuell:* Er speichert es nur als Datei ab, wir sehen es nicht direkt.

---

### 5. Bonus-Features 

* **LLM-as-a-Judge (Sicherheitscheck):**
    * Ein **zweites, kleines LLM** pr√ºft die finale Antwort, bevor sie rausgeht.
    * **Check:** Stimmt die Antwort mit den Fakten √ºberein?
    * **Check:** Gibt der Agent illegale Finanzberatung? (Sicherheit $\rightarrow$ Punkte).

* **Sandbox / Restricted Imports (Sicherheitsgurt):**
    * **Problem:** Der Agent f√ºhrt Python-Code aktuell direkt auf unseren Laptops aus. Das ist gef√§hrlich (er k√∂nnte theoretisch Dateien l√∂schen oder auf private Ordner zugreifen).
    * **L√∂sung:** Wir nutzen die `authorized_imports` Liste in `smolagents` strikt.
    * **Aufgabe:** Nur harmlose Bibliotheken (`pandas`, `matplotlib`, `numpy`) erlauben. Alles andere (wie `os`, `sys`, `subprocess`) muss hart blockiert werden.

* **Agent Memory (Ged√§chtnis):**
    * Der Agent soll sich an **vorherige Nachrichten** erinnern k√∂nnen.
    * *Beispiel:* "Wie steht Tesla?" $\rightarrow$ Agent antwortet $\rightarrow$ **N√§chste Frage:** "Und wie ist das im Vergleich zu Apple?" (Der Agent wei√ü dann, worum es geht).

* **Prompt Optimization (Smarter fragen):**
    * Der Agent soll komplizierte Nutzer-Fragen automatisch **umformulieren** oder zerlegen.
    * *Ziel:* Die Qualit√§t der Antworten steigt, weil der Agent den "Plan" besser versteht.

* **Hybrid Search:**
    * Wir bauen einen **Router**.
    * Der Agent entscheidet automatisch: Brauche ich **Text (RAG)** oder **Zahlen (CSV)**?
    * *Ziel:* Effizienz. Nicht immer alles durchsuchen, wenn es nicht n√∂tig ist.

* **Re-Ranking:**
    * Nachdem RAG Dokumente gefunden hat, sortiert ein **zweiter Algorithmus** die Ergebnisse nochmal nach Relevanz.
    * *Ziel:* Nur die allerbesten Treffer werden dem LLM gegeben (weniger Halluzinationen).

---

## 3. Aktuelle Probleme (Bugfixing)

* **OpenAI API Limits (Rate Limiting):**
    * Problem: Der Agent "denkt" zu schnell und feuert zu viele Anfragen $\rightarrow$ Absturz (`429 Error`).
    * **L√∂sung:** Wir m√ºssen ein `time.sleep()` einbauen oder den Agenten bremsen, wenn er in einer Loop h√§ngt.

* **Prompting (Reihenfolge erzwingen):**
    * Problem: Er greift manchmal sofort zur Websuche (die wir eigentlich ausstellen wollen) oder ignoriert Tools.
    * **L√∂sung:** Den **System-Prompt** so umschreiben, dass er eine feste Checkliste abarbeitet (1. Erst DB checken, 2. Dann rechnen, 3. Dann antworten).